ALTER TABLE `cf_goods` CHANGE `quanx_id` `quanx_id` CHAR( 60 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '犬型',
CHANGE `quanq_id` `quanq_id` CHAR( 60 ) CHARACTER SET ucs2 COLLATE ucs2_general_ci NOT NULL COMMENT '犬期',
CHANGE `gongx_id` `gongx_id` CHAR( 60 ) CHARACTER SET ucs2 COLLATE ucs2_general_ci NOT NULL COMMENT '功效';

ALTER TABLE `cf_order` ADD `is_giveaway` INT( 1 ) UNSIGNED NOT NULL DEFAULT '0' COMMENT '是否有赠品' AFTER `order_sn` ,
ADD `json_giveaway` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '赠品json' AFTER `is_giveaway`;
ALTER TABLE `cf_order` ADD `giveaway_price` DECIMAL( 10, 2 ) NOT NULL DEFAULT '0.00' COMMENT '赠品价格' AFTER `json_giveaway`;
ALTER TABLE `cf_order` ADD `giveaway_name` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '赠品名称字符串' AFTER `giveaway_price`;

CREATE TABLE IF NOT EXISTS `cf_goods_giveaway` (
  `goods_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '商品ID',
  `bn` varchar(200) DEFAULT NULL COMMENT '商品编号',
  `name` varchar(200) NOT NULL DEFAULT '' COMMENT '商品名称',
  `price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '销售价',
  `type_id` mediumint(8) unsigned DEFAULT NULL COMMENT '包装类型',
  `is_giveaway` smallint(5) NOT NULL DEFAULT '1' COMMENT '是否赠品（1不是，2是）',
  `cat_id` mediumint(8) unsigned NOT NULL DEFAULT '0' COMMENT '分类',
  `brand_id` mediumint(8) unsigned DEFAULT NULL COMMENT '品牌',
  `marketable` int(4) NOT NULL DEFAULT '1' COMMENT '上架',
  `store` mediumint(8) unsigned DEFAULT '0' COMMENT '库存',
  `uptime` int(10) unsigned DEFAULT NULL COMMENT '上架时间',
  `downtime` int(10) unsigned DEFAULT NULL COMMENT '下架时间',
  `last_modify` int(10) unsigned DEFAULT NULL COMMENT '更新时间',
  `p_order` mediumint(8) unsigned NOT NULL DEFAULT '30' COMMENT '排序',
  `score` mediumint(8) unsigned DEFAULT NULL COMMENT '积分',
  `mktprice` decimal(10,2) DEFAULT '0.00' COMMENT '市场价',
  `weight` decimal(20,3) DEFAULT NULL COMMENT '重量',
  `unit` varchar(20) DEFAULT NULL COMMENT '单位',
  `brief` varchar(255) DEFAULT NULL COMMENT '商品简介',
  `thumbnail_pic` varchar(255) DEFAULT NULL COMMENT '缩略图',
  `big_pic` varchar(255) DEFAULT NULL COMMENT '大图',
  `intro` longtext COMMENT '详细介绍',
  `disabled` enum('true','false') NOT NULL DEFAULT 'false',
  `rank_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'google page rank count',
  `comments_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '评论次数',
  `view_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '浏览次数',
  `buy_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '购买次数',
  `is_pc` tinyint(4) NOT NULL DEFAULT '0' COMMENT '发往PC平台',
  `is_wap` tinyint(4) NOT NULL DEFAULT '0' COMMENT '发往wap平台',
  `is_app` tinyint(4) NOT NULL DEFAULT '0' COMMENT '发往app平台',
  `is_debit` tinyint(4) NOT NULL DEFAULT '0' COMMENT '是否使用优惠券',
  `s_img` varchar(255) DEFAULT NULL COMMENT '分享小图',
  `quanx_id` char(60) NOT NULL COMMENT  '犬型',
  `quanq_id` char(60) NOT NULL COMMENT  '犬期',
  `gongx_id` char(60) NOT NULL COMMENT  '功效',
  `h_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '最高价格',
  `l_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '最低价格',
  PRIMARY KEY (`goods_id`),
  UNIQUE KEY `uni_bn` (`bn`),
  KEY `ind_frontend` (`disabled`,`marketable`),
  KEY `idx_marketable` (`marketable`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT;

CREATE TABLE IF NOT EXISTS `cf_goods_package` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '礼包ID',
  `name` varchar(200) NOT NULL DEFAULT '' COMMENT '礼包名称',
  `c_list` varchar(255) DEFAULT NULL COMMENT '常规商品(逗号分隔)',
  `f_list` varchar(255) DEFAULT NULL COMMENT '非常规商品(逗号分隔)',
  `last_modify` int(10) unsigned DEFAULT NULL COMMENT '更新时间',
  `p_order` mediumint(8) unsigned NOT NULL DEFAULT '30' COMMENT '排序',
  `price` decimal(10,2) DEFAULT '0.00' COMMENT '市场价',
  `brief` varchar(255) DEFAULT NULL COMMENT '礼包简介',
  `thumbnail_pic` varchar(255) DEFAULT NULL COMMENT '缩略图',
  `big_pic` varchar(255) DEFAULT NULL COMMENT '大图',
  `marketable` int(4) NOT NULL DEFAULT '1' COMMENT '上架',
  `mktprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '市场价',
  `store` mediumint(8) unsigned NOT NULL DEFAULT '0' COMMENT '库存',
  `s_img` varchar(255) NOT NULL COMMENT '图片',
  `intro` longtext COMMENT '详细介绍',
  `quanx_id` char(60) NOT NULL COMMENT '犬型',
  `quanq_id` char(60) NOT NULL COMMENT '犬期',
  `gongx_id` char(60) NOT NULL COMMENT '功效',
  `h_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '最高价格',
  `l_money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '最低价格',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT;

CREATE TABLE IF NOT EXISTS `cf_order_giveaway_log` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增ID',
  `order_id` int(11) NOT NULL DEFAULT '0' COMMENT '订单id',
  `user_id` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '会员ID',
  `user_name` varchar(60) NOT NULL COMMENT '会员名称',
  `order_price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '订单价格',
  `giveaway_price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '赠品价格',
  `price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '赠品总价',
  `giveaway_id` varchar(255) NOT NULL COMMENT '赠品id字符串',
  `giveaway_name` varchar(255) NOT NULL COMMENT '赠品名字 字符串',
  `type` int(11) NOT NULL COMMENT '类型（1常，2非，3礼包）',
  `admin_id` int(11) NOT NULL DEFAULT '0' COMMENT '操作人id',
  `admin_name` varchar(60) NOT NULL COMMENT '后台操作名称',
  `add_time` int(11) NOT NULL COMMENT '添加时间',
  `up_time` int(11) NOT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT;